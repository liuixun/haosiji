!function(e){function t(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return e[a].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){"use strict";!function(e,t){function i(e){return e*g}function a(e){this.init=function(){this.config=e,o=f.add.group(),o.enableBody=!0,o.createMultiple(e.selfPool,e.selfPic),o.setAll("anchor.y",1),o.setAll("outOfBoundsKill",!0),o.setAll("checkWorldBounds",!0),this.maxWidth=f.width-80,f.time.events.loop(Phaser.Timer.SECOND*e.rate,this.createQL,this)},this.createQL=function(){var t=o.getFirstExists(!1);if(t){if(d>=e.max)return;d++,t.events.onInputDown.removeAll();var a=Math.random();a=a<.5?a+=.5:a,t.loadTexture(this.config.selfPic),t.alpha=1,t.scale.setTo(i(a)),t.reset(f.rnd.integerInRange(0,this.maxWidth),0),t.body.velocity.y=f.rnd.integerInRange(e.minSpeed,e.maxSpeed),t.inputEnabled=!0,t.events.onInputDown.add(this.hitted,this)}},this.hitted=function(e){h+=1,e.inputEnabled=!1;var t=e.animations.add("hitted");e.play("hitted",100,!1),t.onComplete.add(this.fade,this,e)},this.fade=function(e){var t=f.add.tween(e).to({alpha:0},300,"Linear",!0);t.onComplete.add(this.killed,this,e)},this.killed=function(e){e.kill()}}function s(e){this.init=function(){this.config=e,this.DogGroup=f.add.group(),this.DogGroup.enableBody=!0,this.DogGroup.createMultiple(e.selfPool,e.selfPic),this.DogGroup.setAll("anchor.y",1),this.DogGroup.setAll("outOfBoundsKill",!0),this.DogGroup.setAll("checkWorldBounds",!0),this.maxWidth=f.width-80,f.time.events.loop(Phaser.Timer.SECOND*e.rate,this.createDog,this)},this.createDog=function(){var t=this.DogGroup.getFirstExists(!1);if(t){var i=Math.random();i=i<.5?i+=.5:i,t.loadTexture(this.config.selfPic),t.alpha=1,t.scale.setTo(i),t.reset(f.rnd.integerInRange(0,this.maxWidth),0),t.body.velocity.y=f.rnd.integerInRange(e.minSpeed,e.maxSpeed)}}}var o,n=t(window).width(),r=t(window).height(),h=0,d=0,l={selfPool:30,selfPic:"qinglvdog",rate:.5,maxSpeed:500,minSpeed:300,max:95},c={selfPool:20,selfPic:"dog",rate:.3,maxSpeed:300,minSpeed:100,punished:!0},m=25,g=n/375,f=new Phaser.Game(n,r,Phaser.AUTO,"");f.States={},f.States.boot=function(){this.preload=function(){"undefined"!=typeof GAME&&(this.load.baseURL=GAME+"/"),f.device.desktop||(this.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.scale.forcePortrait=!0,this.scale.refresh())},this.create=function(){f.stage.backgroundColor="#F6DE8C",f.state.start("preload")}},f.States.preload=function(){this.preload=function(){f.load.spritesheet("daojishi","assets/img/daojishi.png",200,200,3),f.load.image("bg","assets/img/bg.png"),f.load.image("qinglvdog","assets/img/qinglv.png"),f.load.image("dog","assets/img/dog.png"),f.load.image("logo","assets/img/logo.png"),f.load.image("shengyu","assets/img/shengyu.png"),f.load.image("chaisan","assets/img/chaisan.png"),f.load.bitmapFont("number","assets/img/number.png","assets/img/number.xml")},this.create=function(){f.state.start("main")}},f.States.main=function(){this.create=function(){this.leftTime=m,f.physics.startSystem(Phaser.Physics.ARCADE);var e=f.add.sprite(0,0,"bg");e.width=f.width,e.height=f.height;var t=f.add.sprite(f.world.centerX-f.cache.getImage("logo").width/2*.6,0,"logo");t.scale.setTo(.6);var a=f.add.sprite(f.world.centerX-100,f.world.centerY-100,"daojishi"),s=a.animations.add("daojishi");a.play("daojishi",1,!1),s.onComplete.add(this.startGame,this,a);var o=f.add.sprite(0,0,"shengyu");o.fixedToCamera=!0,o.scale.setTo(i(.75)),o.cameraOffset.setTo(f.camera.width-i(150),f.camera.height-i(85));var n=f.add.sprite(0,0,"chaisan");n.fixedToCamera=!0,n.scale.setTo(i(.75)),n.cameraOffset.setTo(f.camera.width-i(150),f.camera.height-i(60)),this.leftTimeText=f.add.bitmapText(0,0,"number","00:"+this.leftTime,26),this.leftTimeText.scale.setTo(i(1)),this.leftTimeText.fixedToCamera=!0,this.leftTimeText.cameraOffset.setTo(f.camera.width-i(80),f.camera.height-i(88)),this.chaiisanNum=f.add.bitmapText(0,0,"number",h.toString(),26),this.chaiisanNum.scale.setTo(i(1)),this.chaiisanNum.fixedToCamera=!0,this.chaiisanNum.cameraOffset.setTo(f.camera.width-i(80),f.camera.height-i(64))},this.update=function(){this.chaiisanNum.text=h},this.startGame=function(e){e.visible=!1,this.createQingLv(),f.time.events.repeat(Phaser.Timer.SECOND,this.leftTime,this.refreshTime,this)},this.createQingLv=function(){this.qinglv=new a(l),this.qinglv.init(),this.dog=new s(c),this.dog.init()},this.refreshTime=function(){this.leftTime--;var e=this.leftTime;this.leftTime<10&&(e="0"+this.leftTime),this.leftTimeText.text="00:"+e,0===this.leftTime&&(f.paused=!0)}},f.States.over=function(){this.create=function(){}},f.state.add("boot",f.States.boot),f.state.add("preload",f.States.preload),f.state.add("main",f.States.main),f.state.add("over",f.States.over),f.state.start("boot")}(window,jQuery)}]);